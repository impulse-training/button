var e="0.4",n=2500,i=500,u=0,a=null,o=null,c=!1;function t(e,t){setWatch(function(){clearTimeout(o),c?c=!1:(u+=1,a&&clearTimeout(a),a=setTimeout(function(){e(u),a=null,u=0},i))},BTN,{edge:"falling",repeat:!0,debounce:10}),setWatch(function(){o=setTimeout(function(){t(),c=!0},n)},BTN,{edge:"rising",repeat:!0,debounce:10})}function r(e,t,n){for(var i=0;i<t;i++)setTimeout(function(){e.write(!0)},2*n*i+1),setTimeout(function(){e.write(!1)},2*n*i+n)}function f(){NRF.setAdvertising({},{name:"Impulse"})}var l=!1;function s(){LED3.write(!1),r(LED1,5,20),l=!1,v()}function d(){r(LED3,3,20),l=!0}function v(){NRF.setServices({48350:{43981:{maxLen:20,readable:!0,notify:!0},61166:{maxLen:20,readable:!0,broadcast:!0,value:e}},6159:{10777:{readable:!0,notify:!0,value:[Puck.getBatteryPercentage()]}}},{advertise:["0000bcde-0000-1000-8000-00805f9b34fb","0000180f-0000-1000-8000-00805f9b34fb"]})}function b(e){if(!l)return r(LED1,3,1e3);r(LED3,e,20),NRF.updateServices({48350:{43981:{value:e.toString(),readable:!0,notify:!0}},6159:{10777:{value:[Puck.getBatteryPercentage()],readable:!0,notify:!0}}}),setTimeout(function(){NRF.updateServices({48350:{43981:{value:"0",notify:!0}}})},2e3)}function g(){if(!l)return r(LED1,3,1e3);r(LED3,1,1e3),NRF.updateServices({48350:{43981:{value:"long",notify:!0}}})}f(),t(b,g),v(),NRF.setConnectionInterval(80),NRF.on("disconnect",s),NRF.on("connect",d);
